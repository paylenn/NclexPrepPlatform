<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NCLEX Practice Exam - PayLeNN.tech</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/neubrutalism.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <a href="../index.html" class="logo">PayLeNN<span>.tech</span></a>
            <nav class="nav">
                <a href="../index.html" class="nav-link"><i class="fas fa-home"></i> Home</a>
                <span id="exam-title-nav" class="nav-link">Practice Exam</span>
            </nav>
        </div>
    </header>

    <!-- Exam Info Section -->
    <section class="section" id="exam-info">
        <div class="container">
            <div class="neu-card tertiary">
                <div id="exam-intro">
                    <h2 id="exam-title">NCLEX Practice Exam</h2>
                    <p id="exam-description">Loading exam information...</p>
                    <div class="exam-controls mt-4">
                        <button id="start-exam-btn" class="neubtn primary">Begin Exam</button>
                        <a href="../index.html" class="neubtn">Return Home</a>
                    </div>
                </div>
                
                <div id="exam-container" class="hidden">
                    <div class="exam-header">
                        <div>
                            <h3 id="question-number">Question 1 of 10</h3>
                        </div>
                        <div>
                            <button id="exit-exam-btn" class="neubtn">Exit Exam</button>
                        </div>
                    </div>
                    
                    <div id="question-container" class="question-container">
                        <p id="question-stem" class="question-stem">Loading question...</p>
                        <div id="options-container" class="options-container">
                            <!-- Options will be inserted here -->
                        </div>
                    </div>
                    
                    <div class="exam-controls">
                        <button id="prev-question-btn" class="neubtn" disabled>Previous</button>
                        <button id="show-answer-btn" class="neubtn secondary">Show Answer</button>
                        <button id="next-question-btn" class="neubtn primary">Next</button>
                    </div>
                    
                    <div id="rationale-container" class="answer-rationale hidden">
                        <h3>Rationale</h3>
                        <p id="rationale-text"></p>
                    </div>
                </div>
                
                <div id="results-container" class="hidden">
                    <h2>Exam Results</h2>
                    <div class="neu-card">
                        <div class="stats-container">
                            <div class="stat-box">
                                <div class="stat-value" id="result-score">0%</div>
                                <div class="stat-label">SCORE</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-value" id="result-correct">0</div>
                                <div class="stat-label">CORRECT</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-value" id="result-total">0</div>
                                <div class="stat-label">TOTAL</div>
                            </div>
                        </div>
                        
                        <div id="result-message" class="mt-3 mb-3"></div>
                        
                        <div class="exam-controls">
                            <button id="review-exam-btn" class="neubtn secondary">Review Answers</button>
                            <a href="../index.html" class="neubtn primary">Return Home</a>
                        </div>
                    </div>
                    
                    <div id="question-review" class="hidden mt-4">
                        <h3>Question Review</h3>
                        <div id="review-questions">
                            <!-- Review questions will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Font Size Controls -->
    <div class="font-size-controls collapsed" id="font-size-controls">
        <div class="font-size-controls-header" id="font-size-controls-header">
            <h5 class="font-size-controls-title">Font Size</h5>
            <span class="font-size-controls-toggle">⬆️</span>
        </div>
        <div class="font-size-buttons">
            <button class="font-size-button" data-size="small">A</button>
            <button class="font-size-button active" data-size="medium">A</button>
            <button class="font-size-button" data-size="large">A</button>
            <button class="font-size-button" data-size="xl">A</button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-about">
                    <h3>PayLeNN.tech</h3>
                    <p>Your NCLEX Success Partner</p>
                </div>
                <div class="footer-links">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="../index.html#exams">Exam Options</a></li>
                        <li><a href="../index.html#progress">Your Progress</a></li>
                        <li><a href="../index.html#tips">NCLEX Tips</a></li>
                    </ul>
                </div>
                <div class="footer-contact">
                    <h3>Contact</h3>
                    <p>Email: support@paylenn.tech</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 PayLeNN.tech. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="../js/questions.js"></script>
    <script>
        // Analytics tracking
        function trackExamCompletion(examType, score) {
            // Get existing analytics data
            let analytics = JSON.parse(localStorage.getItem('nclexAnalytics') || '{"pageViews":[],"examAttempts":{}}');
            
            // Initialize exam type if doesn't exist
            if (!analytics.examAttempts[examType]) {
                analytics.examAttempts[examType] = {
                    starts: 1,
                    completions: 0,
                    avgScore: 0,
                    lastAttempt: new Date().toISOString()
                };
            }
            
            // Update completions and scores
            analytics.examAttempts[examType].completions++;
            
            // Calculate new average score
            const oldCompletions = analytics.examAttempts[examType].completions - 1;
            const oldAvgScore = analytics.examAttempts[examType].avgScore || 0;
            
            // Calculate new average
            if (oldCompletions > 0) {
                analytics.examAttempts[examType].avgScore = 
                    ((oldAvgScore * oldCompletions) + score) / analytics.examAttempts[examType].completions;
            } else {
                analytics.examAttempts[examType].avgScore = score;
            }
            
            // Store updated analytics
            localStorage.setItem('nclexAnalytics', JSON.stringify(analytics));
        }
        
        // Font size control functionality
        function initFontSizeControls() {
            // Get elements
            const fontSizeControls = document.getElementById('font-size-controls');
            const fontSizeHeader = document.getElementById('font-size-controls-header');
            const fontSizeButtons = document.querySelectorAll('.font-size-button');
            
            // Check if font size preference exists
            const savedFontSize = localStorage.getItem('nclexFontSize');
            if (savedFontSize) {
                setFontSize(savedFontSize);
                
                // Update active button
                fontSizeButtons.forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.getAttribute('data-size') === savedFontSize) {
                        btn.classList.add('active');
                    }
                });
            }
            
            // Toggle the font size controls panel
            fontSizeHeader.addEventListener('click', function() {
                fontSizeControls.classList.toggle('collapsed');
            });
            
            // Add click event to each font size button
            fontSizeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const size = this.getAttribute('data-size');
                    
                    // Remove active class from all buttons
                    fontSizeButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Set font size
                    setFontSize(size);
                    
                    // Save preference to localStorage
                    localStorage.setItem('nclexFontSize', size);
                });
            });
        }
        
        function setFontSize(size) {
            // Remove all font size classes
            document.body.classList.remove('font-size-small', 'font-size-medium', 'font-size-large', 'font-size-xl');
            
            // Add the selected font size class
            document.body.classList.add(`font-size-${size}`);
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the practice exam
            initializePracticeExam();
            
            // Setup the exam questions
            const urlParams = new URLSearchParams(window.location.search);
            const examType = urlParams.get('exam') || 'exam1';
            setupExamQuestions(examType);
            
            // Initialize font size controls
            initFontSizeControls();
        });
    </script>
</body>
</html>
